(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7923:function(t,e,n){Promise.resolve().then(n.t.bind(n,7960,23)),Promise.resolve().then(n.bind(n,9534)),Promise.resolve().then(n.bind(n,2291)),Promise.resolve().then(n.bind(n,9197)),Promise.resolve().then(n.t.bind(n,2783,23)),Promise.resolve().then(n.t.bind(n,142,23))},9534:function(t,e,n){"use strict";n.d(e,{Toaster:function(){return a}});var r=n(7437),o=n(4242);function a(){return(0,r.jsx)(o.Ix,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})}n(2648)},2291:function(t,e,n){"use strict";n.d(e,{a:function(){return i},default:function(){return s}});var r=n(7437),o=n(2265),a=n(9116);let c=(0,o.createContext)(void 0);function i(){let t=(0,o.useContext)(c);if(!t)throw Error("useAuth must be used within AuthProvider");return t}function s(t){let{children:e}=t,[n,i]=(0,o.useState)(()=>{try{let t=localStorage.getItem("tricy_user");return t?JSON.parse(t):null}catch(t){return null}}),[s,u]=(0,o.useState)(()=>{try{return localStorage.getItem("tricy_token")}catch(t){return null}}),[l,h]=(0,o.useState)(!1);async function y(t,e){h(!0);try{let n=await (0,a.v_)("/auth/login",{email:t,password:e});if(null==n?void 0:n.access_token)return localStorage.setItem("tricy_token",n.access_token),localStorage.setItem("tricy_user",JSON.stringify(n.user||{})),u(n.access_token),i(n.user||null),n.user||null;return null}finally{h(!1)}}async function m(t){h(!0);try{await (0,a.v_)("/auth/register",t),t.email&&t.password&&await y(t.email,t.password)}finally{h(!1)}}return(0,o.useEffect)(()=>{try{let t=localStorage.getItem("tricy_user"),e=localStorage.getItem("tricy_token");t&&!n&&i(JSON.parse(t)),e&&!s&&u(e)}catch(t){}function t(){i(null),u(null)}try{window.addEventListener("tricy_logout",t)}catch(t){}return()=>{try{window.removeEventListener("tricy_logout",t)}catch(t){}}},[]),(0,r.jsx)(c.Provider,{value:{user:n,token:s,loading:l,login:y,register:m,logout:function(){try{localStorage.removeItem("tricy_token"),localStorage.removeItem("tricy_user")}catch(t){}u(null),i(null)}},children:e})}},9116:function(t,e,n){"use strict";n.d(e,{U2:function(){return c},r$:function(){return i},v_:function(){return a}});let r=n(257).env.NEXT_PUBLIC_API_BASE||"https://kadzysakatna.onrender.com";function o(){try{return localStorage.getItem("tricy_token")}catch(t){return null}}async function a(t,e){let n=o(),a={"Content-Type":"application/json"};n&&(a.Authorization="Bearer ".concat(n));let c=await fetch("".concat(r).concat(t),{method:"POST",headers:a,body:JSON.stringify(e)});if(401===c.status){try{localStorage.removeItem("tricy_token"),localStorage.removeItem("tricy_user"),window.dispatchEvent(new CustomEvent("tricy_logout"))}catch(t){}throw{message:"Unauthorized",status:401}}let i=await c.json().catch(()=>null);if(!c.ok)throw i||{message:c.statusText};return i}async function c(t){let e=o(),n={"Content-Type":"application/json"};e&&(n.Authorization="Bearer ".concat(e));let a=await fetch("".concat(r).concat(t),{headers:n});if(401===a.status){try{localStorage.removeItem("tricy_token"),localStorage.removeItem("tricy_user"),window.dispatchEvent(new CustomEvent("tricy_logout"))}catch(t){}throw{message:"Unauthorized",status:401}}let c=await a.json().catch(()=>null);if(!a.ok)throw c||{message:a.statusText};return c}async function i(t,e){let n=o(),a={"Content-Type":"application/json"};n&&(a.Authorization="Bearer ".concat(n));let c=await fetch("".concat(r).concat(t),{method:"PATCH",headers:a,body:JSON.stringify(e)});if(401===c.status){try{localStorage.removeItem("tricy_token"),localStorage.removeItem("tricy_user"),window.dispatchEvent(new CustomEvent("tricy_logout"))}catch(t){}throw{message:"Unauthorized",status:401}}let i=await c.json().catch(()=>null);if(!c.ok)throw i||{message:c.statusText};return i}},7960:function(){}},function(t){t.O(0,[827,587,9,971,117,744],function(){return t(t.s=7923)}),_N_E=t.O()}]);
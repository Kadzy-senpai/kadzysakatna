(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{8370:function(e,t,r){Promise.resolve().then(r.bind(r,3855))},3855:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var n=r(7437),a=r(2265),o=r(2869),i=r(6070),s=r(5974),l=r(6109),c=r(801),d=r(4766),u=r(3774),p=r(7877),f=r(1671),g=r(7648),h=r(1817);let m=(0,r(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function v(e){let{activeRide:t,rideCoords:o}=e,i=(0,a.useRef)(null),[s,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[u,p]=(0,a.useState)(!0),[f,g]=(0,a.useState)(null),[v,x]=(0,a.useState)([]),y=(0,a.useRef)(null),b=(0,a.useRef)(null),k=(0,a.useRef)([]),w=(0,a.useRef)(null);return((0,a.useEffect)(()=>{if("geolocation"in navigator){let e=navigator.geolocation.watchPosition(e=>{d({lat:e.coords.latitude,lng:e.coords.longitude}),p(!1)},e=>{console.error("[v0] Geolocation error:",e),d({lat:14.5995,lng:120.9842}),g("Location access denied. Showing default location."),p(!1)},{enableHighAccuracy:!0,maximumAge:1e4});return()=>navigator.geolocation.clearWatch(e)}d({lat:14.5995,lng:120.9842}),g("Geolocation not supported"),p(!1)},[]),(0,a.useEffect)(()=>{if(c&&i.current&&!s)return(async()=>{let e=(await Promise.resolve().then(r.t.bind(r,759,23))).default;await Promise.all([r.e(641),r.e(46)]).then(r.t.bind(r,5046,23)),delete e.Icon.Default.prototype._getIconUrl,e.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});let t=e.map(i.current).setView([c.lat,c.lng],14);e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(t),y.current=e;let n=e.divIcon({className:"custom-driver-marker",html:'<div style="background: #4caf50; width: 28px; height: 28px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; font-size: 14px;">\uD83D\uDEFA</div>',iconSize:[28,28],iconAnchor:[14,14]}),a=e.marker([c.lat,c.lng],{icon:n}).addTo(t).bindPopup("Your Location (Driver)");b.current=a,l(t)})(),()=>{s&&s.remove()}},[c]),(0,a.useEffect)(()=>{if(!s||(k.current.forEach(e=>e.remove()),k.current=[],0===v.length))return;let e=y.current||r(759);return v.forEach(t=>{let r=e.divIcon({className:"custom-passenger-marker",html:'<div style="background: #4f83cc; width: 20px; height: 20px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3);"></div>',iconSize:[20,20],iconAnchor:[10,10]}),n=e.marker([t.lat,t.lng],{icon:r}).addTo(s).bindPopup("Passenger: ".concat(t.name));k.current.push(n)}),()=>{k.current.forEach(e=>e.remove()),k.current=[]}},[s,v]),(0,a.useEffect)(()=>{let e=t||(o&&o.pickup_lat&&o.pickup_lng&&o.dropoff_lat&&o.dropoff_lng?{pickup:{lat:Number(o.pickup_lat),lng:Number(o.pickup_lng)},dropoff:{lat:Number(o.dropoff_lat),lng:Number(o.dropoff_lng)}}:void 0);if(!s||!e){if(w.current){try{w.current.remove()}catch(e){}w.current=null}return}let n=y.current||r(759);if(w.current){try{w.current.remove()}catch(e){}w.current=null}let a=n.divIcon({className:"pickup-marker",html:'<div style="background: #ff9800; width: 22px; height: 22px; border-radius: 50%; border: 3px solid white; display:flex;align-items:center;justify-content:center;">\uD83D\uDCCD</div>',iconSize:[22,22],iconAnchor:[11,11]}),i=n.divIcon({className:"dropoff-marker",html:'<div style="background: #6574cd; width: 22px; height: 22px; border-radius: 50%; border: 3px solid white; display:flex;align-items:center;justify-content:center;">\uD83C\uDFC1</div>',iconSize:[22,22],iconAnchor:[11,11]}),l=n.marker([e.pickup.lat,e.pickup.lng],{icon:a}).addTo(s).bindPopup("Pickup Location"),d=n.marker([e.dropoff.lat,e.dropoff.lng],{icon:i}).addTo(s).bindPopup("Drop-off Location"),u=[];c&&u.push([c.lat,c.lng]),u.push([e.pickup.lat,e.pickup.lng]),u.push([e.dropoff.lat,e.dropoff.lng]);let p=n.polyline(u,{color:"#4f83cc",weight:4,opacity:.8}).addTo(s);w.current=p;try{let e=p.getBounds();s.fitBounds(e.pad?e.pad(.2):e,{padding:[50,50]})}catch(t){s.setView([e.pickup.lat,e.pickup.lng],14)}return()=>{try{l.remove()}catch(e){}try{d.remove()}catch(e){}try{p.remove()}catch(e){}w.current=null}},[s,t,o]),(0,a.useEffect)(()=>{if(!s||!c)return;let e=y.current||r(759);if(b.current)try{b.current.setLatLng([c.lat,c.lng])}catch(e){}else{let t=e.divIcon({className:"custom-driver-marker",html:'<div style="background: #4caf50; width: 28px; height: 28px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; font-size: 14px;">\uD83D\uDEFA</div>',iconSize:[28,28],iconAnchor:[14,14]});b.current=e.marker([c.lat,c.lng],{icon:t}).addTo(s).bindPopup("Your Location (Driver)")}if(w.current)try{let e=w.current.getLatLngs?w.current.getLatLngs():[];if(Array.isArray(e)&&e.length>0){let t=[[c.lat,c.lng],...e.slice(1).map(e=>[e.lat,e.lng])];w.current.setLatLngs(t);let r=w.current.getBounds();s.fitBounds(r,{padding:[50,50]})}}catch(e){}},[c,s]),u)?(0,n.jsx)("div",{className:"h-64 bg-muted flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(h.Z,{className:"h-8 w-8 text-primary mx-auto mb-2 animate-spin"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading map..."})]})}):(0,n.jsxs)("div",{className:"relative h-64 rounded-lg overflow-hidden",children:[(0,n.jsx)("div",{ref:i,className:"h-full w-full"}),f&&(0,n.jsx)("div",{className:"absolute top-2 left-2 right-2 bg-yellow-100 border border-yellow-300 text-yellow-800 px-3 py-2 rounded text-xs",children:f}),(0,n.jsxs)("div",{className:"absolute bottom-2 right-2 bg-white px-3 py-1.5 rounded-full shadow-md text-xs font-medium flex items-center gap-1.5",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-secondary rounded-full animate-pulse"}),"Live Tracking"]}),v.length>0&&!t&&(0,n.jsxs)("div",{className:"absolute top-2 left-2 bg-white px-3 py-1.5 rounded-full shadow-md text-xs font-medium flex items-center gap-1.5",children:[(0,n.jsx)(m,{className:"h-3 w-3 text-primary"}),v.length," Nearby"]})]})}var x=r(9116),y=r(6023),b=r(9376);function k(){let[e,t]=(0,a.useState)([]),[r,h]=(0,a.useState)([]),[m,k]=(0,a.useState)([]),[w,_]=(0,a.useState)(void 0),N=(0,y.vF)(),j=(null==N?void 0:N.driver_id)||(null==N?void 0:N.user_id),S=(0,b.useRouter)();(0,a.useEffect)(()=>{N&&"driver"!==N.role&&S.push("/login?type=driver")},[N,S]),(0,a.useEffect)(()=>{let e=!0;(async function(){try{let r=await (0,x.U2)("/bookings/status/requested"),n=j?await (0,x.U2)("/bookings/driver/".concat(j)):[];if(!e)return;let a=e=>{var t,r,n,a,o,i,s,l,c,d;return{id:e.booking_id,passengerName:e.user_id||"Passenger",pickup:e.pickup_location||e.pickup||"",dropoff:e.dropoff_location||e.dropoff||"",fare:e.fare||0,status:"requested"===e.status?"pending":e.status,created_at:null!==(r=null!==(t=e.created_at)&&void 0!==t?t:e.createdAt)&&void 0!==r?r:null,pickup_lat:null!==(a=null!==(n=e.pickup_lat)&&void 0!==n?n:e.pickupLat)&&void 0!==a?a:null,pickup_lng:null!==(i=null!==(o=e.pickup_lng)&&void 0!==o?o:e.pickupLng)&&void 0!==i?i:null,dropoff_lat:null!==(l=null!==(s=e.dropoff_lat)&&void 0!==s?s:e.dropoffLat)&&void 0!==l?l:null,dropoff_lng:null!==(d=null!==(c=e.dropoff_lng)&&void 0!==c?c:e.dropoffLng)&&void 0!==d?d:null}},o=Array.isArray(r)?r.map(a):[],i=Array.isArray(n)?n.map(a):[],s=(e,t)=>{let r=e.created_at||"",n=t.created_at||"";return r===n?0:r<n?1:-1};o.sort(s),i.sort(s);let l=new Set(i.map(e=>e.id)),c=o.filter(e=>!l.has(e.id));t(c);let d=[],u=[],p=new Set;for(let e of i)p.has(e.id)||(p.add(e.id),"completed"===(e.status||"").toLowerCase()?u.push(e):d.push(e));h(d),k(u)}catch(e){console.error("fetch bookings",e)}})();let r=e=>{try{let{booking_id:t,status:r}=(null==e?void 0:e.detail)||{};if(!t)return;if("completed"===(r||"").toLowerCase()){h(e=>e.filter(e=>e.id!==t)),k(e=>e.some(e=>e.id===t)?e:[{id:t,passengerName:"Passenger",pickup:"",dropoff:"",fare:0,status:"completed"},...e]);try{_(void 0)}catch(e){}}}catch(e){console.error("tricy_booking_updated handler error",e)}};return window.addEventListener("tricy_booking_updated",r),()=>{e=!1,window.removeEventListener("tricy_booking_updated",r)}},[j]);let C=async n=>{try{var a,o,i,s,l,c,d,u,p,f,g,m;if(!j){alert("Driver id not found; ensure you are registered as a driver");return}if(r.length>0){alert("You have an active ride. Complete it before accepting a new request.");return}let v=e.find(e=>e.id===n)||null,y=await (0,x.v_)("/bookings/".concat(n,"/assign/").concat(j),{});if(t(e=>e.filter(e=>e.id!==n)),y&&y.booking){let e=y.booking,t={id:e.booking_id,passengerName:e.user_id||"Passenger",pickup:e.pickup_location||e.pickup||"",dropoff:e.dropoff_location||e.dropoff||"",fare:e.fare||0,status:"requested"===e.status?"pending":e.status,pickup_lat:null!==(a=e.pickup_lat)&&void 0!==a?a:null,pickup_lng:null!==(o=e.pickup_lng)&&void 0!==o?o:null,dropoff_lat:null!==(i=e.dropoff_lat)&&void 0!==i?i:null,dropoff_lng:null!==(s=e.dropoff_lng)&&void 0!==s?s:null};h(e=>[t,...e.filter(e=>e.id!==t.id)]),_({pickup_lat:null!==(l=t.pickup_lat)&&void 0!==l?l:null,pickup_lng:null!==(c=t.pickup_lng)&&void 0!==c?c:null,dropoff_lat:null!==(d=t.dropoff_lat)&&void 0!==d?d:null,dropoff_lng:null!==(u=t.dropoff_lng)&&void 0!==u?u:null})}else if(v)h(e=>[v,...e.filter(e=>e.id!==v.id)]),_({pickup_lat:null!==(p=v.pickup_lat)&&void 0!==p?p:null,pickup_lng:null!==(f=v.pickup_lng)&&void 0!==f?f:null,dropoff_lat:null!==(g=v.dropoff_lat)&&void 0!==g?g:null,dropoff_lng:null!==(m=v.dropoff_lng)&&void 0!==m?m:null});else try{let e=j?await (0,x.U2)("/bookings/driver/".concat(j)):[];if(Array.isArray(e)){let t=e.map(e=>{var t,r,n,a;return{id:e.booking_id,passengerName:e.user_id||"Passenger",pickup:e.pickup_location||e.pickup||"",dropoff:e.dropoff_location||e.dropoff||"",fare:e.fare||0,status:"requested"===e.status?"pending":e.status,pickup_lat:null!==(t=e.pickup_lat)&&void 0!==t?t:null,pickup_lng:null!==(r=e.pickup_lng)&&void 0!==r?r:null,dropoff_lat:null!==(n=e.dropoff_lat)&&void 0!==n?n:null,dropoff_lng:null!==(a=e.dropoff_lng)&&void 0!==a?a:null}}),r=[],n=[],a=new Set;for(let e of t)a.has(e.id)||(a.add(e.id),"completed"===(e.status||"").toLowerCase()?n.push(e):r.push(e));h(r),k(n)}else h([]),k([])}catch(e){console.error("failed to refresh accepted bookings",e)}}catch(e){alert("Failed to accept booking: "+((null==e?void 0:e.message)||JSON.stringify(e)))}},z=e=>{t(t=>t.filter(t=>t.id!==e))};return(0,n.jsxs)(l.O,{children:[(0,n.jsxs)("header",{className:"bg-primary text-primary-foreground p-6 shadow-md",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Driver Dashboard"}),(0,n.jsx)(g.default,{href:"/notifications",children:(0,n.jsx)(o.z,{variant:"ghost",size:"icon",className:"text-primary-foreground hover:bg-primary-foreground/20",children:(0,n.jsx)(d.Z,{className:"h-5 w-5"})})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)(s.C,{variant:"secondary",className:"px-3 py-1",children:[r.length," Active rides"]}),(0,n.jsxs)(s.C,{variant:"outline",className:"px-3 py-1 bg-primary-foreground/10 text-primary-foreground border-primary-foreground/20",children:[m.length," Completed"]})]})]}),(0,n.jsxs)("div",{className:"p-6 space-y-6",children:[(0,n.jsx)(i.Zb,{className:"shadow-lg overflow-hidden",children:(0,n.jsx)(v,{rideCoords:w||(r.length>0?(()=>{var e,t,n,a;let o=r[0];return{pickup_lat:null!==(e=o.pickup_lat)&&void 0!==e?e:null,pickup_lng:null!==(t=o.pickup_lng)&&void 0!==t?t:null,dropoff_lat:null!==(n=o.dropoff_lat)&&void 0!==n?n:null,dropoff_lng:null!==(a=o.dropoff_lng)&&void 0!==a?a:null}})():void 0)})}),e.length>0&&(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h2",{className:"text-lg font-bold text-foreground",children:"New Requests"}),e.map(e=>(0,n.jsxs)(i.Zb,{className:"shadow-lg border-l-4 border-l-secondary",children:[(0,n.jsx)(i.Ol,{className:"pb-3",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(i.ll,{className:"text-base",children:e.passengerName}),(0,n.jsxs)(s.C,{className:"bg-secondary text-secondary-foreground",children:["â‚±",e.fare]})]})}),(0,n.jsxs)(i.aY,{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex items-start gap-2",children:[(0,n.jsx)(u.Z,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium text-muted-foreground",children:"Pickup"}),(0,n.jsx)("p",{className:"text-foreground",children:e.pickup})]})]}),(0,n.jsxs)("div",{className:"flex items-start gap-2",children:[(0,n.jsx)(p.Z,{className:"h-4 w-4 text-secondary mt-0.5 flex-shrink-0"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium text-muted-foreground",children:"Drop-off"}),(0,n.jsx)("p",{className:"text-foreground",children:e.dropoff})]})]})]}),(0,n.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,n.jsx)(o.z,{onClick:()=>C(e.id),className:"flex-1",size:"sm",disabled:r.length>0,children:"Accept"}),(0,n.jsx)(o.z,{onClick:()=>z(e.id),variant:"outline",className:"flex-1",size:"sm",children:"Decline"})]})]})]},e.id))]}),r.length>0&&(0,n.jsx)("div",{className:"p-3 rounded bg-yellow-50 border border-yellow-200 text-sm text-yellow-800",children:"You have an active ride. Complete it before accepting new requests."}),0===e.length&&0===r.length&&(0,n.jsx)(i.Zb,{className:"shadow-lg",children:(0,n.jsxs)(i.aY,{className:"py-12 text-center",children:[(0,n.jsx)(f.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"No active booking requests"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"New requests will appear here"})]})})]}),(0,n.jsx)(c.L,{userType:"driver"})]})}},801:function(e,t,r){"use strict";r.d(t,{L:function(){return p}});var n=r(7437),a=r(7648),o=r(9376),i=r(7877),s=r(1047);let l=(0,r(9205).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var c=r(8226),d=r(2369),u=r(4508);function p(e){let{userType:t}=e,r=(0,o.usePathname)(),p=t;if(!p)try{let e=localStorage.getItem("tricy_user"),t=e?JSON.parse(e):null;(null==t?void 0:t.role)&&(p=t.role)}catch(e){}let f="driver"===p?"/driver":"/passenger",g="driver"===p?"Active rides":"Bookings",h=[{href:f,icon:l,label:"Home"},{href:"/bookings",icon:"driver"===p?i.Z:s.Z,label:g},{href:"/transactions",icon:c.Z,label:"Transactions"},{href:"/profile",icon:d.Z,label:"Profile"}];return(0,n.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border shadow-lg z-50",children:(0,n.jsx)("div",{className:"max-w-md mx-auto flex justify-around items-center h-16 px-4",children:h.map(e=>{let t=e.icon,o=r===e.href;return(0,n.jsxs)(a.default,{href:e.href,className:(0,u.cn)("flex flex-col items-center justify-center gap-1 flex-1 h-full transition-colors",o?"text-primary":"text-muted-foreground"),children:[(0,n.jsx)(t,{className:"h-5 w-5"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:e.label})]},e.href)})})})}},6109:function(e,t,r){"use strict";r.d(t,{O:function(){return o}});var n=r(7437),a=r(4508);function o(e){let{children:t,className:r}=e;return(0,n.jsx)("div",{className:(0,a.cn)("min-h-screen bg-background pb-20",r),children:(0,n.jsx)("div",{className:"max-w-md mx-auto",children:t})})}},5974:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var n=r(7437);r(2265);var a=r(8482),o=r(535),i=r(4508);let s=(0,o.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,asChild:o=!1,...l}=e,c=o?a.g7:"span";return(0,n.jsx)(c,{"data-slot":"badge",className:(0,i.cn)(s({variant:r}),t),...l})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(7437);r(2265);var a=r(8482),o=r(535),i=r(1817),s=r(4508);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:r,size:o,asChild:c=!1,isLoading:d=!1,loadingText:u,children:p,...f}=e,g=c?a.g7:"button";return(0,n.jsx)(g,{"data-slot":"button",className:(0,s.cn)(l({variant:r,size:o,className:t}),d&&"cursor-wait","active:scale-95 transition-transform duration-75"),disabled:d||f.disabled,...f,children:d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{className:"animate-spin"}),u||p]}):p})}},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return l},Zb:function(){return o},aY:function(){return c},ll:function(){return s}});var n=r(7437);r(2265);var a=r(4508);function o(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function s(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function l(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function c(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}},9116:function(e,t,r){"use strict";r.d(t,{U2:function(){return i},r$:function(){return s},v_:function(){return o}});let n=r(257).env.NEXT_PUBLIC_API_BASE||"https://kadzysakatna.onrender.com";function a(){try{return localStorage.getItem("tricy_token")}catch(e){return null}}async function o(e,t){let r=a(),o={"Content-Type":"application/json"};r&&(o.Authorization="Bearer ".concat(r));let i=await fetch("".concat(n).concat(e),{method:"POST",headers:o,body:JSON.stringify(t)});if(401===i.status){try{localStorage.removeItem("tricy_token"),localStorage.removeItem("tricy_user"),window.dispatchEvent(new CustomEvent("tricy_logout"))}catch(e){}throw{message:"Unauthorized",status:401}}let s=await i.json().catch(()=>null);if(!i.ok)throw s||{message:i.statusText};return s}async function i(e){let t=a(),r={"Content-Type":"application/json"};t&&(r.Authorization="Bearer ".concat(t));let o=await fetch("".concat(n).concat(e),{headers:r});if(401===o.status){try{localStorage.removeItem("tricy_token"),localStorage.removeItem("tricy_user"),window.dispatchEvent(new CustomEvent("tricy_logout"))}catch(e){}throw{message:"Unauthorized",status:401}}let i=await o.json().catch(()=>null);if(!o.ok)throw i||{message:o.statusText};return i}async function s(e,t){let r=a(),o={"Content-Type":"application/json"};r&&(o.Authorization="Bearer ".concat(r));let i=await fetch("".concat(n).concat(e),{method:"PATCH",headers:o,body:JSON.stringify(t)});if(401===i.status){try{localStorage.removeItem("tricy_token"),localStorage.removeItem("tricy_user"),window.dispatchEvent(new CustomEvent("tricy_logout"))}catch(e){}throw{message:"Unauthorized",status:401}}let s=await i.json().catch(()=>null);if(!i.ok)throw s||{message:i.statusText};return s}},6023:function(e,t,r){"use strict";r.d(t,{M8:function(){return i},kS:function(){return o},vF:function(){return a}});var n=r(9116);function a(){let e=localStorage.getItem("tricy_user");return e?JSON.parse(e):null}function o(){localStorage.removeItem("tricy_token"),localStorage.removeItem("tricy_user"),window.dispatchEvent(new CustomEvent("tricy_logout"))}async function i(e){let t=a(),r=null!=e?e:null==t?void 0:t.user_id;if(!r)return null;try{return await (0,n.U2)("/users/".concat(r))}catch(e){return console.error("fetchUserFromApi",e),null}}},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return o}});var n=r(1994),a=r(3335);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},4766:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1671:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8226:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3774:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7877:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]])},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7648:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(2972),a=r.n(n)},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[212,998,972,971,117,744],function(){return e(e.s=8370)}),_N_E=e.O()}]);